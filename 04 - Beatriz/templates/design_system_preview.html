<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design System Preview - [BRAND_NAME]</title>
    <style>
        /* ==========================================
           FALLBACK TOKENS & BASE STYLES
           ========================================== */
        :root {
            /* Fallback colors */
            --color-background: #FFFFFF;
            --color-surface: #F8FAFC;
            --color-primary: #3B82F6;
            --color-secondary: #8B5CF6;
            --color-text-primary: #1E293B;
            --color-text-secondary: #64748B;
            --color-border: #E2E8F0;
            /* Fallback fonts */
            --font-display: 'Georgia', serif;
            --font-body: 'Inter', sans-serif;
        }

        /* Base styles remain the same */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: var(--font-body);
            color: var(--color-text-primary);
            background: var(--color-background);
            line-height: 1.6;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-display);
            line-height: 1.2;
            margin-bottom: 1rem;
        }
        h1 { font-size: 3rem; } h2 { font-size: 2.25rem; } h3 { font-size: 1.875rem; }
        p { margin-bottom: 1rem; color: var(--color-text-secondary); }
        .container { max-width: 1200px; margin: 0 auto; padding: 3rem; }
        .section { margin-bottom: 3rem; padding: 2rem; background: var(--color-surface); border-radius: 12px; }
        .section-title { color: var(--color-text-primary); border-bottom: 2px solid var(--color-border); padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
        .btn { padding: 0.75rem 1.5rem; border-radius: 8px; border: none; font-family: var(--font-body); font-size: 1rem; font-weight: 500; cursor: pointer; transition: all 0.2s; text-decoration: none; }
        .btn-primary { background: var(--color-primary); color: var(--color-text-on-primary, #FFF); }
        .btn-primary:hover { opacity: 0.9; }
        .color-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
        .color-swatch { border: 1px solid var(--color-border); border-radius: 8px; overflow: hidden; }
        .color-preview { height: 100px; width: 100%; }
        .color-info { padding: 1rem; background: white; }
        .color-name { font-weight: 600; text-transform: capitalize; }
        .color-hex { font-family: monospace; color: var(--color-text-secondary); }
    </style>
</head>
<body>
    <div class="container">
        <div class="section">
            <h1 id="brand-name">[BRAND_NAME] Design System</h1>
            <p id="brand-description">Preview dinâmico dos tokens definidos em <strong>design_system.tokens.js</strong></p>
        </div>

        <div class="section">
            <h2 class="section-title">Princípios de Design</h2>
            <p><strong>Keywords:</strong> <span id="keywords"></span></p>
            <p><strong>Evitar:</strong> <span id="avoid"></span></p>
        </div>

        <div class="section">
            <h2 class="section-title">Paleta de Cores Semântica</h2>
            <div class="color-grid" id="color-palette">
                <!-- Swatches de cor serão inseridos aqui pelo JavaScript -->
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">Tipografia</h2>
            <div id="typography-info">
                <!-- Info de tipografia será inserida aqui -->
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">Exemplo de Componente</h2>
            <button class="btn btn-primary">Ação Primária</button>
        </div>
    </div>

    <script type="module">
        // Importa os tokens do novo arquivo.
        // Se este HTML for movido, o caminho de importação precisa ser ajustado.
        import { tokens } from './design_system.tokens.js';

        // Função para injetar os tokens na página
        function applyDesignTokens(tokens) {
            const root = document.documentElement;

            // 1. Atualiza o título e a descrição
            document.title = `Design System Preview - ${tokens.designPrinciples.overall}`;
            document.getElementById('brand-name').textContent = `${tokens.designPrinciples.overall}`;
            document.getElementById('brand-description').innerHTML = `Preview dinâmico dos tokens definidos em <strong>design_system.tokens.js</strong>. Essência: <em>${tokens.designPrinciples.overall}</em>`;
            
            // 2. Preenche os princípios de design
            document.getElementById('keywords').textContent = tokens.designPrinciples.keywords.join(', ');
            document.getElementById('avoid').textContent = tokens.designPrinciples.avoid.join(', ');

            // 3. Aplica as cores semânticas como variáveis CSS
            const paletteContainer = document.getElementById('color-palette');
            paletteContainer.innerHTML = ''; // Limpa o container
            for (const [group, colors] of Object.entries(tokens.colorPalette.semantic)) {
                for (const [name, value] of Object.entries(colors)) {
                    const tokenName = `--color-${group}-${name}`;
                    // Tenta avaliar o valor (ex: "primitiveColors.neutral[0]")
                    let finalValue = value;
                    try {
                        // Isso é um truque para avaliar a referência, ex: 'primitiveColors.neutral[50]'
                        finalValue = new Function('primitiveColors', `return ${value}`)(tokens.colorPalette.primitive);
                    } catch (e) {
                        // Se falhar, usa o valor como está (ex: #HEX)
                        console.warn(`Could not evaluate token value: ${value}. Using it directly.`);
                    }
                    
                    root.style.setProperty(tokenName, finalValue);

                    // Cria o swatch de cor no preview
                    const swatch = document.createElement('div');
                    swatch.className = 'color-swatch';
                    swatch.innerHTML = `
                        <div class="color-preview" style="background-color: ${finalValue};"></div>
                        <div class="color-info">
                            <div class="color-name">${group} ${name}</div>
                            <div class="color-hex">${finalValue}</div>
                        </div>
                    `;
                    paletteContainer.appendChild(swatch);
                }
            }
             // Aplica a cor do texto do botão primário
            root.style.setProperty('--color-text-on-primary', tokens.colorPalette.semantic.text.onPrimary);
            
            // 4. Aplica as fontes
            const headingFont = tokens.typography.fontFamilies.headings.family;
            const bodyFont = tokens.typography.fontFamilies.body.family;
            root.style.setProperty('--font-display', headingFont);
            root.style.setProperty('--font-body', bodyFont);
            
            const typoContainer = document.getElementById('typography-info');
            typoContainer.innerHTML = `
                <h3>Fonte de Título (Display): <span style="font-family: ${headingFont};">${headingFont}</span></h3>
                <p>Usada para todos os headings (H1, H2, etc).</p>
                <hr style="margin: 1rem 0; border: 1px solid var(--color-border);">
                <h3>Fonte de Corpo (Body): <span style="font-family: ${bodyFont};">${bodyFont}</span></h3>
                <p>Usada para parágrafos e textos gerais, garantindo legibilidade.</p>
            `;

            console.log('Tokens aplicados com sucesso!', tokens);
        }

        // Executa a função
        applyDesignTokens(tokens);
    </script>
</body>
</html>
